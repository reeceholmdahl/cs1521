Added try catch blocks to gracefully exit when there is a dynamic memory lack.
